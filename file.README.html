<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-geoip">geoip</h1>

<p>Project state:</p>

<p>GitHub: <a href="https://github.com/rtib/puppet-geoip/issues"><img
src="https://img.shields.io/github/issues/rtib/puppet-geoip.svg"></a> <a
href="https://github.com/rtib/puppet-geoip/blob/master/LICENSE"><img
src="https://img.shields.io/github/license/rtib/puppet-geoip.svg"></a> <a
href="https://github.com/rtib/puppet-geoip/releases"><img
src="https://img.shields.io/github/tag/rtib/puppet-geoip.svg"></a></p>

<p>Travis-CI: <a href="https://travis-ci.org/rtib/puppet-geoip"><img
src="https://travis-ci.org/rtib/puppet-geoip.svg?branch=master"></a></p>

<p>Puppet Forge: <a href="https://forge.puppet.com/trepasi/geoip"><img
src="https://img.shields.io/puppetforge/v/trepasi/geoip.svg"></a> <a
href="https://forge.puppet.com/trepasi/geoip"><img
src="https://img.shields.io/puppetforge/f/trepasi/geoip.svg"></a> <a
href="https://forge.puppet.com/trepasi/geoip"><img
src="https://img.shields.io/puppetforge/dt/trepasi/geoip.svg"></a></p>

<h2 id="label-Table+of+Contents">Table of Contents</h2>
<!-- @import "[TOC]" depthFrom=1 depthTo=6 orderedList=false --><!-- code_chunk_output --><ul><li>
<p><a href="#label-Geoip">geoip</a></p>
</li><li>
<p><a href="#label-Table+of+contents">Table of Contents</a></p>
</li><li>
<p><a href="#label-Description">Description</a></p>
</li><li>
<p><a href="#label-Setup">Setup</a></p>
<ul><li>
<p><a href="#label-What+geoip+affects">What geoip affects</a></p>
</li><li>
<p><a href="#label-Setup+requirements">Setup Requirements</a></p>
</li><li>
<p><a href="#label-Beginning+with+geoip">Beginning with geoip</a></p>
</li></ul>
</li><li>
<p><a href="#label-Usage">Usage</a></p>
<ul><li>
<p><a href="#label-Updating+databases">Updating databases</a></p>
</li><li>
<p><a href="#label-Update+scheduling">Update scheduling</a></p>
</li></ul>
</li><li>
<p><a href="#label-Reference">Reference</a></p>
</li><li>
<p><a href="#label-Development">Development</a></p>
</li></ul>
<!-- /code_chunk_output -->
<h2 id="label-Description">Description</h2>

<p>This Puppet module installs and maintains tools and processes to use GeoIP
databases from MaxMind. These include the lookup tools for lookup and
update the databases. It will manage the configuration for the update tool
which enables to set up your subscription settings, product IDs and other
settings, e.g. proxy settings. If systemd is available, a service is
defined in order to enable a seamless update process.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-What+geoip+affects">What geoip affects</h3>

<p>The module will install some packages, create a configuration file and a
systemd service unit.</p>

<h3 id="label-Setup+Requirements">Setup Requirements</h3>

<p>Neccesary packages must be available for installation by the package
management tools used on the target system. As this is not the case on many
systems, you have to take care about the availability of the packages. The
list of the packages to be installed is a configuration option.</p>

<h3 id="label-Beginning+with+geoip">Beginning with geoip</h3>

<p>The only thing to start with geoip is to include the class in the manifest
of your nodes.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_geoip'>geoip</span>
</code></pre>

<p>All configuration parameter can be assigned hiera. The default values are
also lookuped up by hiera using the database shipped with the module.</p>

<h2 id="label-Usage">Usage</h2>

<p>All configuration parameter can be set using hiera. The default values
allow you to download all free available geoip databases from MaxMind.</p>

<pre class="code ruby"><code class="ruby">geoip::config:
  userid: &#39;999999&#39;
  licensekey: &#39;000000000000&#39;
  productids:
    - GeoLite2-City
    - GeoLite2-Country</code></pre>

<p>If you have a subscription, add userid and licensekey to your hiera, along
with the productids your subscription is valid for and you want to
download. Note, that this configuration will only be active at the next
update.</p>

<p>Optional configuration settings are available, enable to set:</p>
<ul><li>
<p><code>database_directory</code>: where to store the database files</p>
</li><li>
<p><code>protocol</code>: HTTP or HTTPS</p>
</li><li>
<p><code>proxy</code>: URL to the Proxy service allowing access to the
Internet</p>
</li><li>
<p><code>proxy_user_password</code>: Username and password to the Proxy, if
needed.</p>
</li><li>
<p><code>skip_hostname_verification</code>: Disable hostname verification.</p>
</li><li>
<p><code>skip_peer_verification</code>: Disable certificate validation.</p>
</li></ul>

<h3 id="label-Updating+databases">Updating databases</h3>

<p>In order to update your databases you may use the <code>geoipupdate</code>
tool with the configuration file created by this puppet module.</p>

<p>If you haven&#39;t disabled <code>geoip::manage_service</code>, you may
start the update service named <code>geoip::service_name</code> (defaults
to <code>geoip_update</code>), which will do the update.</p>

<h3 id="label-Update+scheduling">Update scheduling</h3>

<p>Updates, if handled by SystemD, can be scheduled by setting
<code>geoip::update_timers</code> an array of timer descriptions. These
timer descriptions apply on systemd timer unit OnCalendar options. For
correct syntax of these timestamps see <a
href="https://www.freedesktop.org/software/systemd/man/systemd.time.html#Parsing%20Timestamps">systemd.time(7)#Parsing
Timestamps</a>.</p>

<p>The parameter <code>geoip::update_scatter</code> defines the seconds for
systemd timer AccuracySec option (see <a
href="https://www.freedesktop.org/software/systemd/man/systemd.timer.html#AccuracySec=">systemd.timer(5)#AccuracySec</a>)
to prevent multiple nodes to update at the same time.</p>

<h2 id="label-Reference">Reference</h2>

<p>Generated reference documentation is available at <a
href="https://rtib.github.io/puppet-geoip/">rtib.github.io/puppet-geoip/</a>.</p>

<h2 id="label-Development">Development</h2>

<p>According to its license, you are free to contribute changes to this
module. You may aware of the general workflows when contributing to GitHub
projects, if not yet, please read CONTRIBUTING.md.</p>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>